flowchart TD
    subgraph "Server-Side Processing"
        A[Research Process Starts] --> B[Generate 20-30 Search Queries]
        B --> C[Execute Batch of Searches]
        C --> D[Process Search Results]
        D --> E[Analyze Content with Models]
        E --> F[Aggregate Batch Results]
        F --> G{More Batches?}
        G -->|Yes| C
        G -->|No| H[Final Synthesis]
    end
    
    subgraph "Data Streaming"
        A -.-> S1[Stream: Research Started]
        B -.-> S2[Stream: Queries Generated]
        C -.-> S3[Stream: Searches In Progress]
        C -.-> S4[Stream: Search X/Y Complete]
        D -.-> S5[Stream: Processing Results]
        E -.-> S6[Stream: Analysis X% Complete]
        F -.-> S7[Stream: Batch X/Y Complete]
        H -.-> S8[Stream: Final Results]
    end
    
    subgraph "Client-Side UI"
        S1 -.-> U1[Show Welcome Message]
        S2 -.-> U2[Display Query List]
        S3 -.-> U3[Show Progress Bar]
        S4 -.-> U4[Update Results Count]
        S5 -.-> U5[Show Processing Animation]
        S6 -.-> U6[Update Analysis Progress]
        S7 -.-> U7[Display Interim Results]
        S8 -.-> U8[Show Complete Research Report]
    end
    
    classDef processing fill:#e1f5fe,stroke:#0288d1,stroke-width:1px;
    classDef stream fill:#fff8e1,stroke:#ffa000,stroke-width:1px;
    classDef ui fill:#e8f5e9,stroke:#388e3c,stroke-width:1px;
    
    class A,B,C,D,E,F,G,H processing;
    class S1,S2,S3,S4,S5,S6,S7,S8 stream;
    class U1,U2,U3,U4,U5,U6,U7,U8 ui; 